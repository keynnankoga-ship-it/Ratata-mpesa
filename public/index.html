<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ratata Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* === GLOBAL === */
body{
  margin:0;
  background:#0a0a0a;
  color:white;
  font-family:Georgia,serif;
}
h1,h2,h3{margin:0 0 15px}
img{max-width:100%}
.btn{
  background:#ff7a2f;
  padding:12px 25px;
  border:none;
  color:white;
  font-weight:bold;
  cursor:pointer;
  border-radius:6px;
}

/* === NAVIGATION === */
nav{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:20px 50px;
  background:#111;
  position:sticky;
  top:0;
  z-index:1000;
}
nav h2{margin:0;color:#ff7a2f;}
nav ul{
  display:flex;
  list-style:none;
  margin:0;
  padding:0;
}
nav ul li{
  margin-left:25px;
}
nav ul li a{
  color:white;
  text-decoration:none;
  font-weight:bold;
  cursor:pointer;
}
nav ul li a:hover{
  color:#ff7a2f;
}

/* === HERO === */
.hero{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:80px;
  min-height:80vh;
}
.left{max-width:50%}
h1{font-size:60px}

/* === PRODUCTS === */
.products{
  padding:80px 8%;
  background:#111;
  text-align:center;
}
.product-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:30px;
  margin-top:40px;
}
.card{
  background:#1a1a1a;
  padding:20px;
  border-radius:12px;
}
.card img{
  border-radius:10px;
  margin-bottom:10px;
}
.price{
  color:#ff7a2f;
  font-weight:bold;
  margin:10px 0;
}

/* === CART SECTION === */
.cart-section{
  display:none;
  padding:80px 8%;
  background:#111;
}
.cart-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:10px 0;
}
.cart-item input{
  width:50px;
  margin-left:10px;
  padding:5px;
  border-radius:6px;
  border:none;
}
.total{
  font-size:22px;
  margin-top:20px;
  color:#ff7a2f;
}
.cart-buttons{
  margin-top:20px;
}

/* === PAYMENT SECTION === */
.payment-section{
  display:none;
  padding:80px 20px;
  background:#0a0a0a;
  text-align:center;
}
.payment-card{
  max-width:400px;
  margin:auto;
  background:#111;
  padding:40px;
  border-radius:12px;
}
.payment-card input{
  width:100%;
  padding:12px;
  margin:10px 0;
  border:none;
  border-radius:6px;
}
#mpesa-response{
  margin-top:10px;
  color:#ff7a2f;
}

/* === GALLERY === */
.gallery{
  padding:80px 8%;
  text-align:center;
}
.gallery-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;
  margin-top:30px;
}
.gallery img, .gallery video{
  width:100%;
  border-radius:12px;
}

/* === CONTACT === */
.contact{
  padding:80px 20px;
  background:#111;
  text-align:center;
}

/* === FOOTER === */
footer{
  background:#111;
  color:white;
  text-align:center;
  padding:20px;
  font-size:14px;
  margin-top:40px;
}

/* === MEDIA === */
@media(max-width:900px){
  .hero{flex-direction:column;text-align:center}
  .left{max-width:100%}
  nav ul{flex-direction:column}
  nav ul li{margin:10px 0}
}
</style>
</head>

<body>

<!-- NAVIGATION -->
<nav>
  <h2>Ratata</h2>
  <ul>
    <li><a onclick="scrollToHome()">Home</a></li>
    <li><a onclick="scrollToProducts()">Menu</a></li>
    <li><a onclick="scrollToContact()">Contact Us</a></li>
    <li><a onclick="openCart()">Cart</a></li>
    <li><a href="#" target="_blank">Social</a></li>
  </ul>
</nav>

<!-- HERO / HOME -->
<section id="home" class="hero">
  <div class="left">
    <h1>Experience the<br>Power of Ratata</h1>
    <p>One Drink, Three Souls</p>
    <button class="btn" onclick="scrollToProducts()">Shop Now</button>
  </div>
  <div>
    <img src="images/pasta.jpg">
  </div>
</section>

<!-- PRODUCTS -->
<section id="products" class="products">
  <h2>Our Menu</h2>
  <div class="product-grid">

    <div class="card">
      <img src="images/pasta.jpg">
      <h3>Ratata Original 1Litre</h3>
      <div class="price">KSh 700</div>
      <button class="btn" onclick="addToCart('Ratata Original 1Litre',700)">Add to Cart</button>
    </div>

    <div class="card">
      <img src="images/pizza.jpg">
      <h3>Ratata Original 2Litres</h3>
      <div class="price">KSh 1350</div>
      <button class="btn" onclick="addToCart('Ratata Original 2Litres',1350)">Add to Cart</button>
    </div>

    <div class="card">
      <img src="images/dessert.jpg">
      <h3>Ratata Original 5Litres</h3>
      <div class="price">KSh 3000</div>
      <button class="btn" onclick="addToCart('Ratata Original 5Litres',3000)">Add to Cart</button>
    </div>

  </div>
</section>

<!-- CART SECTION -->
<section id="cart" class="cart-section">
  <h2>Your Cart</h2>
  <div id="cart-items"></div>
  <div class="total">Total: KSh <span id="cart-total">0</span></div>
  <div class="cart-buttons">
    <button class="btn" onclick="openPayment()">Checkout</button>
  </div>
</section>

<!-- PAYMENT SECTION -->
<section id="payment" class="payment-section">
  <div class="payment-card">
    <h2>Payment</h2>
    <p>Total: KSh <span id="payment-total">0</span></p>
    <input type="text" id="mpesa-phone" placeholder="2547XXXXXXXX">
    <button class="btn" onclick="payMpesa()">Pay with M-Pesa</button>
    <button class="btn" onclick="payCard()">Pay with Card (Visa)</button>
    <p id="mpesa-response"></p>
  </div>
</section>

<!-- GALLERY -->
<section class="gallery">
  <h2>Gallery</h2>
  <div class="gallery-grid">
    <img src="images/pasta.jpg">
    <img src="images/pizza.jpg">
    <img src="images/dessert.jpg">
  </div>
</section>

<!-- CONTACT -->
<section id="contact" class="contact">
  <h2>Contact</h2>
  <form action="https://formspree.io/f/FORM_ID" method="POST">
    <input type="text" name="name" placeholder="Name">
    <input type="email" name="email" placeholder="Email">
    <textarea name="message" placeholder="Message"></textarea>
    <button class="btn">Send</button>
  </form>
</section>

<!-- FOOTER -->
<footer>
  &copy; 2026 Ratata Store. All rights reserved.
</footer>

<script>
let cart=[];
let total=0;

// NAVIGATION SCROLL
function scrollToHome(){document.getElementById("home").scrollIntoView({behavior:"smooth"})}
function scrollToProducts(){document.getElementById("products").scrollIntoView({behavior:"smooth"})}
function scrollToContact(){document.getElementById("contact").scrollIntoView({behavior:"smooth"})}

// CART FUNCTIONS
function addToCart(name,price){
  let existing=cart.find(i=>i.name===name);
  if(existing){ existing.qty++; existing.priceTotal=existing.qty*price; }
  else{ cart.push({name,price,qty:1,priceTotal:price}); }
  updateCart();
}
function updateCart(){
  const cartDiv=document.getElementById("cart-items");
  cartDiv.innerHTML="";
  total=0;
  cart.forEach((item,index)=>{
    total+=item.priceTotal;
    const div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`<span>${item.name}</span>
      <span>KSh ${item.price} x <input type="number" value="${item.qty}" min="1" onchange="changeQty(${index},this.value)"> = KSh ${item.priceTotal}</span>`;
    cartDiv.appendChild(div);
  });
  document.getElementById("cart-total").innerText=total;
  document.getElementById("payment-total").innerText=total;
}
function changeQty(index,val){
  val=parseInt(val);
  if(val<1) val=1;
  cart[index].qty=val;
  cart[index].priceTotal=cart[index].price*val;
  updateCart();
}
function openCart(){
  document.getElementById("cart").style.display="block";
  document.getElementById("cart").scrollIntoView({behavior:"smooth"});
}
function openPayment(){
  document.getElementById("payment").style.display="block";
  document.getElementById("payment").scrollIntoView({behavior:"smooth"});
}

// PAYMENT
async function payMpesa(){
  const phone=document.getElementById("mpesa-phone").value.trim();
  const response=document.getElementById("mpesa-response");
  if(!phone||total<=0){ response.innerText="Fill cart & phone"; return; }
  response.innerText="Processing payment...";
  try{
    const mpesaRes=await fetch("http://localhost:5000/stkpush",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({phone,amount:total})
    });
    const data=await mpesaRes.json();
    response.innerText="Payment sent âœ”";
  }catch(err){
    response.innerText="Network error";
  }
}
function payCard(){ alert("Card payment not implemented yet."); }
</script>

</body>
</html>